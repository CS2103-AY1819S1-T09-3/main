<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Ivan Ho - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="seedu-header"><nav class="navbar navbar-lg navbar-light bg-lighter"><div class="container"><a class="navbar-brand" href="https://se-edu.github.io/"><img src="../images/SeEduLogo.png" alt="SE-EDU"></a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/addressbook-level1">AB-1</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/addressbook-level2">AB-2</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/addressbook-level3">AB-3</a></li><li class="nav-item"><a class="nav-link active" href="../index.html">AB-4</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/collate">Collate</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/se-book">Book</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/learningresources">Resources</a></li></ul></div></nav></div><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">Piconso</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link" href="../LearningOutcomes.html">LOs</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://cs2103-ay1819s1-t09-3.github.io/main/index.html"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Ivan Ho - Project Portfolio</h1></div><div id="content"><div class="sect1">
<h2 id="project-piconso"><a class="link" href="#project-piconso">PROJECT: Piconso</a></h2>
<div class="sectionbody">
<hr>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Piconso is an CLI (Command Line Interface) Image Editor designed and developed for quick and efficient image-editing. Many image-editors are complex and difficult to pick up, having a steep learning curve and sometimes even a steep price!</p>
</div>
<div class="paragraph">
<p>Unlike them, Piconso offers the same features, in a much more simplified manner. With Piconso, all traditional image-editing features can be performed solely through text commands, removing the hassle of working with a mouse. The interface can be used by photographers, designers, developers and more, and is very easy to pick up.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: added <strong>the ability to undo/redo previous transformations</strong></p>
<div class="ulist">
<ul>
<li>
<p>What it does: allows the user to undo all previous transformations one at a time. Preceding undo transformations can be reversed by using the redo command.</p>
</li>
<li>
<p>Justification: This feature improves the product significantly because a user can make mistakes in transformations and the app should provide a convenient way to rectify them.</p>
</li>
<li>
<p>Highlights: This enhancement uses memoization ensure undo/redo commands are almost instant. Since transformations to images take significant time (especially large images) and that users typically want to quickly inspect the before and after of their transformation, it is necessary  for undo and redo to be fast. As such, after each transformation, the resulting transformed image is cached into a temporary folder. Undo and redo operations will shift a pointer leftwards or rightwards and read the selected image, instead of reapplying or reversing a transformation process which is time consuming.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Code contributed</strong>: [<a href="https://github.com/CS2103-AY1819S1-T09-3/main/commits?author=ihwk1996">All commits</a>]</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Set up team organization and repository on GitHub</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>Wrote tests for undo/redo feature including various test utility classes for team to use for testing (Pull requests <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/105">#105</a>, <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/110">#110</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Added detailed implementation documentation for the undo/redo feature in Developer Guide, including diagrams: <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/56">#56</a>, <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/60">#60</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>PRs reviewed: <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/37">#37</a>, <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/55">#55</a>, <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/57">#57</a>, <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/61">#61</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Tools:</p>
<div class="ulist">
<ul>
<li>
<p>Set up Travis(Continuous Integration) to perform automated testing of test cases and auto-publishing of documentation</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users. (Since undo/redo are simple to understand, there is not much to document here. More details are in the implementation of undo/redo in the Developer Guide)</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="undoing-previous-actions-code-undo-code"><a class="link" href="#undoing-previous-actions-code-undo-code">Undoing previous actions : <code>undo</code></a></h3>
<div class="paragraph">
<p>Format: <code>undo</code>: Step back to the previous transformation</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Commands that can be undone: those commands that modify the image&#8217;s transformation (anything done with <code>convert</code>).</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>convert blur 0x8</code><br>
<code>undo</code> (reverses the <code>convert blur 0x8</code> command)<br></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="redoing-the-previous-actions-code-redo-code"><a class="link" href="#redoing-the-previous-actions-code-redo-code">Redoing the previous actions : <code>redo</code></a></h3>
<div class="paragraph">
<p>Format: <code>redo</code>: Step forward to the previously undone transformation</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>convert blur 0x8</code><br>
<code>undo</code> (reverses the <code>convert blur 0x8</code> command)<br>
<code>redo</code> (reapplies the <code>convert blur 0x8</code> command)<br></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="undo-redo-feature"><a class="link" href="#undo-redo-feature">Undo/Redo feature</a></h3>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>The undo/redo works on the <code>currentLayer</code> the user is working on. Each <code>Layer</code> contains a <code>PreviewImage</code> which facilitates the undo/redo mechanism.
The mechanism works by caching the original image and transformed images in a temporary <code>cache</code> folder, and using <code>currentStatePointer</code> as a pointer together with <code>currentSize</code> as an indicator to manage the caching.
Undoing and redoing will shift the <code>currentStatePointer</code> accordingly while each transformation commits the image by writing to the <code>cache</code> folder (purging redundant images if needed).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To work with multiple layers, each <code>Layer</code> has a single <code>PreviewImage</code> which is initialized with a unique <code>LayerId</code>, so that the <code>PreviewImage</code> can cache its images safely without conflicting image names.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Additionally, it implements the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PreviewImage#commit()</code>&#8201;&#8212;&#8201;Writes the newly transformed <code>BufferedImage</code> into the <code>cache</code> folder (purge redundant images if needed).</p>
</li>
<li>
<p><code>PreviewImage#getImage()</code>&#8201;&#8212;&#8201;Returns the current <code>BufferedImage</code> state of the <code>previewImage</code> by reading from the <code>cache</code> folder.</p>
</li>
<li>
<p><code>PreviewImage#undo()</code>&#8201;&#8212;&#8201;Shifts the <code>currentStatePointer</code> to the left, pointing to the previous state.</p>
</li>
<li>
<p><code>PreviewImage#redo()</code>&#8201;&#8212;&#8201;Shifts the <code>currentStatePointer</code> to the right, pointing to a previously undone state.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These operations are exposed in the <code>Model</code> interface as <code>Model#updateCurrentPreviewImage()</code>, <code>Model#undoPreviewImage()</code> and <code>Model#redoPreviewImage()</code>.</p>
</div>
<div class="paragraph">
<p>Given below is an example usage scenario and how the undo/redo mechanism behaves at each step.</p>
</div>
<div class="paragraph">
<p>Step 1. The user selects an image with the <code>select</code> command. The <code>Canvas</code> is initialized with a new <code>Layer</code> which initializes its own <code>PreviewImage</code> with the selected image. The <code>currentStatePointer</code> pointing to that state.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A <code>Canvas</code> can already be initialized, meaning this is an additional layer being added. The <code>Layer</code> and <code>PreviewImage</code> gets initialized the same way.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedo1.png" alt="undoRedo1" width="800">
</div>
</div>
<div class="paragraph">
<p>Step 2. The user executes a series of transformations. Each time, the newly transformed <code>BufferedImage</code> is stored by writing it to the <code>cache</code> folder. The <code>currentStatePointer</code> is also incremented. Eg. <code>hue</code>, <code>mirror</code>, <code>blur</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a command fails its execution, it will not call <code>Model#updateCurrentPreviewImage()</code>, so nothing will be cached.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedo2.png" alt="undoRedo2" width="800">
</div>
</div>
<div class="paragraph">
<p>Step 3. The user wants to undo the previous action by using the <code>undo</code> command. It will call <code>Model#undoPreviewImage()</code> which will shift the <code>currentStatePointer</code> once to the left, pointing it to the previous <code>PreviewImage</code> state. After which, a <code>ChangeImageEvent</code> posted with the new image state by calling <code>PreviewImage#getImage()</code> to update the UI&#8217;s preview image pane.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>currentStatePointer</code> is at index 0, pointing to the initial state, then there are no previous states to restore. The <code>undo</code> command uses <code>Model#canUndoPreviewImage()</code> to check if this is the case. If so, it will return an error to the user rather than attempting to perform the undo.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedo3.png" alt="undoRedo3" width="800">
</div>
</div>
<div class="paragraph">
<p>Step 4. The user executes another transformation, which calls <code>Model#updateCurrentPreviewImage</code>. Since the <code>currentStatePointer</code> is not pointing at the end state (<code>currentSize - 1</code>), and the states after the <code>currentStatePointer</code> will not make sense, all states after the pointer will be purged.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedo4.png" alt="undoRedo4" width="800">
</div>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the undo operation works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedoSequenceDiagram.png" alt="undoRedoSequenceDiagram" width="800">
</div>
</div>
<div class="paragraph">
<p>The redo command does the opposite — it calls <code>Model#redoPreviewImage()</code>, which shifts the currentStatePointer once to the right, pointing to the previously undone state.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>currentStatePointer</code> is at index <code>currentSize - 1</code>, pointing to the <code>PreviewImage&#8217;s</code> last state, then there are no undone states to restore. The <code>redo</code> command uses <code>Model#canReddoPreviewImage()</code> to check if this is the case. If so, it will return an error to the user rather than attempting to perform the redo.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following activity diagram summarizes what happens when a user executes a new transformation:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedoActivityDiagram.png" alt="undoRedoActivityDiagram" width="800">
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-how-undo-redo-executes"><a class="link" href="#aspect-how-undo-redo-executes">Aspect: How undo &amp; redo executes</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Saves each newly transformed image (including original).</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Easy to implement.</p>
</li>
<li>
<p>Cons: Uses user&#8217;s storage space for caching.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Save only the command, and reverse/reapply transformation for each undo/redo.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Will not need to use user&#8217;s data storage.</p>
</li>
<li>
<p>Cons: Transformations on images take significantly more time as compared to reading and writing cache. Also, reversing of transformations are not possible for commands like <code>blur</code> and <code>colorspace</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2018-11-02 07:23:30 UTC</div></div></div></body></html>