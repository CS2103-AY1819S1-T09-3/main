<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Ivan Ho - Project Portfolio</title><link rel="stylesheet" href="../stylesheets/gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../stylesheets/coderay-asciidoctor.css"></head><body class="article"><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">Piconso</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link" href="../LearningOutcomes.html">LOs</a></li><li class="nav-item"><a class="nav-link active" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://cs2103-ay1819s1-t09-3.github.io/main/index.html"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"><h1>Ivan Ho - Project Portfolio</h1></div><div id="content"><div class="sect1">
<h2 id="introduction"><a class="link" href="#introduction">Introduction</a></h2>
<div class="sectionbody">
<div class="imageblock" style="text-align: left">
<div class="content">
<img src="../images/ihwk1996.png" alt="ihwk1996" width="200">
</div>
</div>
<div class="paragraph">
<p>[<a href="http://github.com/ihwk1996">github</a>] [<a href="https://linkedin.com/in/ivanhowengkwong">linkedin</a>]</p>
</div>
<div class="paragraph">
<p>Hello there! I am Ivan, a Year 2 Computer Science student in NUS. This portfolio documents the contributions I have made to several projects. These projects have exposed me to new technologies and helped me to develop relevant skills en route to being a Software Engineer.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-piconso"><a class="link" href="#project-piconso">PROJECT: Piconso</a></h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="link" href="#overview">Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Piconso is a robust yet simple image-editing tool. Catered towards power users, Piconso users interact through the Command Line Interface (CLI), while providing visual feedback through Graphical User Interface (GUI).
Unlike other heavy image editors, Piconso has a very gentle learning curve as it abstracts out clutter by providing the more essential features (complex editing can still be done with special commands). The features and implementations are well documented in guides for users and developers respectively.
In addition, Piconso is well maintained with high reliability and code quality as it is covered by rigorous tests and checks.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/Ui.png" alt="Ui" width="602">
</div>
<div class="title">Figure 1. A view of Piconso</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="role"><a class="link" href="#role">Role</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>My role was to facilitate the history of transformations of images within each layer. As the undo and redo feature is done using memoization, images need to be cached after each transformation. I constructed the base class to manage the caching and retrieval of images, then linked it to the Model and Storage components. In addition, I wrote rigorous tests and test utilities to ensure high reliability and simpler maintenance.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary-of-contributions"><a class="link" href="#summary-of-contributions">Summary of contributions</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong>Major enhancement</strong>: added <strong>the ability to undo/redo previous transformations</strong></p>
<div class="ulist">
<ul>
<li>
<p>What it does: allows the user to undo previous transformations one at a time. Preceding undone transformations can be reversed by using the redo command.</p>
</li>
<li>
<p>Justification: This feature improves the product significantly because a user can make mistakes by applying incorrect transformations and the app should provide a convenient way to rectify them.</p>
</li>
<li>
<p>Highlights: This enhancement uses memoization to ensure undo/redo commands are almost instant. Since transformations to images take significant time (especially on large images) and that users typically want to quickly inspect the before and after of their transformation, it is necessary  for undo and redo to be fast. As such, after each transformation, the resulting transformed image is cached into a temporary folder. Undo and redo operations will shift a pointer leftwards or rightwards and read the selected image, instead of reapplying or reversing a transformation process which is time consuming.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Minor enhancement</strong>: added <strong>the ability to undo/redo all transformations at once</strong></p>
<div class="ulist">
<ul>
<li>
<p>What it does: allows the user to undo all previous transformations swiftly with a single <code>undo-all</code> command. Likewise, all preceding undone transformations can be redone with a single <code>redo-all</code> command.</p>
</li>
<li>
<p>Justification: This feature provides the user with an extra layer of convenience. At times, the user might feel that he wants to revert back to the original state but has applied many transformations. It would be tedious to apply the undo command one by one, hence having command to undo all transformations would be handy. Similarly, if he feels that undoing all commands is a mistake, he can quickly revert back all transformations with the <code>redo-all</code> command.</p>
</li>
<li>
<p>Highlights: Similar the the undo/redo feature, undo-all/redo-all commands are also almost instant with the help of memoization.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Code contributed</strong>: [<a href="https://github.com/CS2103-AY1819S1-T09-3/main/commits?author=ihwk1996">All commits</a>] [<a href="https://nus-cs2103-ay1819s1.github.io/cs2103-dashboard/#=undefined&amp;search=ihwk1996">Project Code Dashboard</a>]</p>
</li>
<li>
<p><strong>Other contributions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Project management:</p>
<div class="ulist">
<ul>
<li>
<p>Set up team organization and repository on GitHub</p>
</li>
</ul>
</div>
</li>
<li>
<p>Enhancements to existing features:</p>
<div class="ulist">
<ul>
<li>
<p>Wrote tests for undo/redo feature including various test utility classes to assist other team members in their testing (Pull requests <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/105">#105</a>, <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/110">#110</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Added detailed implementation documentation for the undo/redo feature in Developer Guide, including diagrams (Pull requests <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/56">#56</a>, <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/60">#60</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Community:</p>
<div class="ulist">
<ul>
<li>
<p>Reviewed and gave feedback to team members. PRs reviewed: <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/37">#37</a>, <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/55">#55</a>, <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/57">#57</a>, <a href="https://github.com/CS2103-AY1819S1-T09-3/main/pull/61">#61</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Tools:</p>
<div class="ulist">
<ul>
<li>
<p>Set up Travis(Continuous Integration) to perform automated testing of test cases and auto-publishing of documentation</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-user-guide"><a class="link" href="#contributions-to-the-user-guide">Contributions to the User Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the User Guide. They showcase my ability to write documentation targeting end-users. (Since undo/redo are simple to understand, there is not much to document here. More details are in the implementation of undo/redo in the Developer Guide)</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="undoes-a-transformation-code-undo-code"><a class="link" href="#undoes-a-transformation-code-undo-code">Undoes a transformation : <code>undo</code></a></h3>
<div class="paragraph">
<p>Format: <code>undo</code> &#8594; Undoes your previous transformation, putting your image to its previous state (in current layer)</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Only commands that modify the image&#8217;s transformation (anything done with <code>apply</code>) can be undone.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p><code>apply blur 0x8</code><br>
<code>apply contrast</code><br>
<code>undo</code> &#8594; (undoes the <code>apply contrast</code> command, image will be returned to be <code>blur 0x8</code> state)<br></p>
</div>
</div>
<div class="sect2">
<h3 id="undoes-all-transformations-code-undo-all-code"><a class="link" href="#undoes-all-transformations-code-undo-all-code">Undoes all transformations : <code>undo-all</code></a></h3>
<div class="paragraph">
<p>Format: <code>undo-all</code> &#8594; Undoes all your transformations, reverting your image to its original state</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p><code>apply blur 0x8</code><br>
<code>apply contrast</code><br>
<code>apply rotate 90</code><br>
<code>undo-all</code> &#8594; undoes all 3 <code>apply</code> commands, image will be at original state</p>
</div>
</div>
<div class="sect2">
<h3 id="redoes-a-transformation-code-redo-code"><a class="link" href="#redoes-a-transformation-code-redo-code">Redoes a transformation : <code>redo</code></a></h3>
<div class="paragraph">
<p>Format: <code>redo</code> &#8594; Reapplies your previously undone transformation, putting your image in its next state (in current layer)</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p><code>apply blur 0x8</code><br>
<code>apply contrast</code><br>
<code>undo</code> &#8594; (undoes the <code>apply contrast</code> command, image will be at <code>blur 0x8</code> state)<br>
<code>redo</code> &#8594; (reapplies the <code>apply contrast</code> command)<br></p>
</div>
</div>
<div class="sect2">
<h3 id="redoes-all-transformations-code-redo-all-code"><a class="link" href="#redoes-all-transformations-code-redo-all-code">Redoes all transformations : <code>redo-all</code></a></h3>
<div class="paragraph">
<p>Format: <code>redo-all</code> &#8594; Reapplies all your undone transformations, putting your image in the state with all transformations applied</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p><code>apply blur 0x8</code><br>
<code>apply contrast</code><br>
<code>apply rotate 90</code><br>
<code>undo-all</code> (undoes all 3 <code>apply</code> commands, image will be at original state)<br>
<code>redo-all</code> (reapplies all 3 <code>apply</code> commands)<br></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributions-to-the-developer-guide"><a class="link" href="#contributions-to-the-developer-guide">Contributions to the Developer Guide</a></h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 100%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Given below are sections I contributed to the Developer Guide. They showcase my ability to write technical documentation and the technical depth of my contributions to the project.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="undo-redo-feature"><a class="link" href="#undo-redo-feature">Undo/Redo feature</a></h3>
<div class="sect3">
<h4 id="current-implementation"><a class="link" href="#current-implementation">Current Implementation</a></h4>
<div class="paragraph">
<p>The <code>undo/redo</code> works on the <code>currentLayer</code> the user is working on. Each <code>Layer</code> contains a <code>PreviewImage</code> which facilitates the undo/redo mechanism.
The mechanism works by caching the original image and transformed images in a temporary <code>cache</code> folder, and using <code>currentStatePointer</code> as a pointer together with <code>currentSize</code> as an indicator to manage the caching.
Undoing and redoing will shift the <code>currentStatePointer</code> accordingly while each transformation commits the image by writing to the <code>cache</code> folder (purging redundant images if needed).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To work with multiple layers, each <code>Layer</code> has a single <code>PreviewImage</code> which is initialized with a unique <code>LayerId</code>, so that the <code>PreviewImage</code> can cache its images safely without conflicting image names.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Additionally, it implements the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PreviewImage#commit()</code> - Writes the newly transformed <code>BufferedImage</code> into the <code>cache</code> folder (purge redundant images if needed).</p>
</li>
<li>
<p><code>PreviewImage#getCurrentPath()</code> - Returns the current state&#8217;s <code>Path</code> in the <code>cache</code> folder for ImageMagick to use.</p>
</li>
<li>
<p><code>PreviewImage#undo()</code> - Shifts the <code>currentStatePointer</code> to the left, pointing to the previous state.</p>
</li>
<li>
<p><code>PreviewImage#redo()</code> - Shifts the <code>currentStatePointer</code> to the right, pointing to a previously undone state.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These operations are exposed in the <code>Model</code> interface as <code>Model#updateCurrentPreviewImage()</code>, <code>Model#undoPreviewImage()</code> and <code>Model#redoPreviewImage()</code>.</p>
</div>
<div class="paragraph">
<p>Given below is an example usage scenario and how the undo/redo mechanism behaves at each step.</p>
</div>
<div class="paragraph">
<p>Step 1. The user opens an image with the <code>open</code> command. The <code>Canvas</code> is initialized with a new <code>Layer</code> which initializes its own <code>PreviewImage</code> with the opened image. The <code>currentStatePointer</code> is pointing to that state.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A <code>Canvas</code> can already be initialized, meaning this is an additional layer being added. The <code>Layer</code> and <code>PreviewImage</code> gets initialized the same way.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedo1.png" alt="undoRedo1" width="800">
</div>
<div class="title">Figure 2. After opening an image</div>
</div>
<div class="paragraph">
<p>Step 2. The user executes a series of transformations. Each time, the newly transformed <code>BufferedImage</code> is stored by writing it to the <code>cache</code> folder. The <code>currentStatePointer</code> is also incremented. Eg. <code>hue</code>, <code>mirror</code>, <code>blur</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a command fails its execution, it will not call <code>Model#updateCurrentPreviewImage()</code>, so nothing will be cached.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedo2.png" alt="undoRedo2" width="800">
</div>
<div class="title">Figure 3. After executing transformations</div>
</div>
<div class="paragraph">
<p>Step 3. The user wants to undo the previous action by using the <code>undo</code> command. It will call <code>Model#undoPreviewImage()</code> which will shift the <code>currentStatePointer</code> once to the left, pointing it to the previous <code>PreviewImage</code> state. After which, that previously cached <code>BufferedImage</code> will be read and rendered to update the UI&#8217;s preview image pane.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>currentStatePointer</code> is at index 0, pointing to the initial state, then there are no previous states to restore. The <code>undo</code> command uses <code>Model#canUndoPreviewImage()</code> to check if this is the case. If so, it will return an error to the user rather than attempting to perform the undo.
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedo3.png" alt="undoRedo3" width="800">
</div>
<div class="title">Figure 4. After exucuting undo</div>
</div>
<div class="paragraph">
<p>Step 4. The user executes another transformation, which calls <code>Model#updateCurrentPreviewImage</code>. Since the <code>currentStatePointer</code> is not pointing at the end state (<code>currentSize - 1</code>), and the states after the <code>currentStatePointer</code> will not make sense, all states after the pointer will be purged.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedo4.png" alt="undoRedo4" width="800">
</div>
<div class="title">Figure 5. After comitting and purging redundant states</div>
</div>
<div class="paragraph">
<p>The following sequence diagram shows how the undo operation works:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedoSequenceDiagram.png" alt="undoRedoSequenceDiagram" width="800">
</div>
<div class="title">Figure 6. Sequence Diagram for Undo/RedoCommand</div>
</div>
<div class="paragraph">
<p>The redo command does the opposite — it calls <code>Model#redoPreviewImage()</code>, which shifts the currentStatePointer once to the right, pointing to the previously undone state.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the <code>currentStatePointer</code> is at index <code>currentSize - 1</code>, pointing to the <code>PreviewImage&#8217;s</code> last state, then there are no undone states to restore. The <code>redo</code> command uses <code>Model#canRedoPreviewImage()</code> to check if this is the case. If so, it will return an error to the user rather than attempting to perform the redo.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following activity diagram summarizes what happens when a user executes a new transformation:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedoActivityDiagram.png" alt="undoRedoActivityDiagram" width="800">
</div>
<div class="title">Figure 7. Activity Diagram for performing a new image transformation</div>
</div>
<div class="paragraph">
<p>The following activity diagram summarizes what happens when a user executes the undo command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedoActivityDiagram2.png" alt="undoRedoActivityDiagram2" width="800">
</div>
<div class="title">Figure 8. Activity Diagram for using <code>undoCommand</code></div>
</div>
<div class="paragraph">
<p>The following activity diagram summarizes what happens when a user executes the redo command:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/undoRedoActivityDiagram3.png" alt="undoRedoActivityDiagram3" width="800">
</div>
<div class="title">Figure 9. Activity Diagram for using <code>redoCommand</code></div>
</div>
</div>
<div class="sect3">
<h4 id="undo-all-and-redo-all"><a class="link" href="#undo-all-and-redo-all">Undo-all and Redo-all</a></h4>
<div class="paragraph">
<p>The commands <code>undo-all</code> and <code>redo-all</code> follow the same implementation as undo and redo. They provide a convenient way to quickly undo and redo all transformations to the current layer&#8217;s <code>PreviewImage</code> for the user.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>undo-all</code> shifts the <code>PreviewImage&#8217;s</code> pointer to 0, pointing at the original state.</p>
</li>
<li>
<p><code>redo-all</code> shifts the <code>PreviewImage&#8217;s</code> pointer to <code>currentSize - 1</code>, the state with all the applied transformations.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="historylistpanel"><a class="link" href="#historylistpanel">HistoryListPanel</a></h4>
<div class="paragraph">
<p>The HistoryListPanel provides a view for the user to see the history of transformations applied.
Whenever a transformation is done or when a undo/redo command is executed, the <code>Model#refreshHistoryList()</code> is executed which refreshes the <code>HistoryListPanel</code> with a <code>HistoryUpdateEvent</code> containing the current layer&#8217;s <code>PreviewImage&#8217;s</code> list of transformations.
A view of the panel is shown below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/historyPanel.png" alt="historyPanel" width="200">
</div>
<div class="title">Figure 10. Image of HistoryListPanel</div>
</div>
</div>
<div class="sect3">
<h4 id="design-considerations"><a class="link" href="#design-considerations">Design Considerations</a></h4>
<div class="sect4">
<h5 id="aspect-how-undo-redo-executes"><a class="link" href="#aspect-how-undo-redo-executes">Aspect: How undo &amp; redo executes</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong> Saves each newly transformed image (including original).</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Fast execution of undo/redo as only reading the cached file is needed. Easy to implement.</p>
</li>
<li>
<p>Cons: Uses the user’s storage space temporarily for caching.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong> Save only the command, and reverse/reapply transformation for each undo/redo.</p>
<div class="ulist">
<ul>
<li>
<p>Pros: Will not need to use user&#8217;s data storage.</p>
</li>
<li>
<p>Cons: Transformations on images take significantly more time as compared to reading and writing cache. Also, reversing of transformations are not possible for commands like <code>blur</code> and <code>colorspace</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2018-11-12 15:31:32 UTC</div></div></div></body></html>