= Piconso - User Guide
:site-section: UserGuide
:toc:
:toc-title:
:toc-placement: preamble
:sectnums:
:imagesDir: images
:stylesDir: stylesheets
:xrefstyle: full
:experimental:
ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
endif::[]
:repoURL: https://github.com/CS2103-AY1819S1-T09-3/main

By: `CS2103-AY1819S1-T09-3`      Since: `Aug 2018`      Licence: `MIT`

== Introduction

Piconso is an image-editing desktop application that is *optimized for those who are familiar with Command Line Interface (CLI)*. If you can type fast, you may be able edit your images even faster than if you were on Photoshop!
Even new users that are unfamiliar with CLI will be able to easily and quickly pick up image-editing with our simple to understand interface.  Interested? Jump to the <<Quick Start>> to get started. Enjoy!

== Quick Start

.  Ensure you have Java version `9` or later installed in your Computer.
.  Download the latest `piconso.jar` link:https://github.com/CS2103-AY1819S1-T09-3/main/releases[here].
.  Copy the file to the folder you want to use as the home folder for your Piconso.
.  Double-click the file to start the app. The Graphical User Inteface (GUI) should appear in a few seconds.

// tag::getting_started[]
== Getting started

Let's work through a simple project in Piconso from start to finish.
In this tutorial, you will learn how to create some of the dankest memes starting from a blank template.

If you ever get stuck with a command, pop down to the Features section for reference!

.The Piconso team know how it feels.

image::tutorial/before-after.png[width:2000]


**Ready to start your Piconso journey?**

. Head over to the link https://github.com/CS2103-AY1819S1-T09-3/main/blob/master/docs/images/tutorial.zip[here] to get a zip file with all the assets you need to get started!
. Unzip the files into somewhere easy to access, like your Pictures folder.
. Start Piconso!
. Use the `cd` and `ls` commands to get to the folder with your unzipped assets.
You can use the `TAB` key to auto-complete pesky folder names! If everything went well, you should see all your images show up in the Image Panel.

.Images and index are showing up!
image::tutorial/step 1.png[width:2000]

[start=5]
. See the number below the base image? That's the __index__ of the image. It might be different depending on your folder's content. If you don't see it within the first ten images, use the `next` and `prev` command to navigate!
. Open the image simply by typing `open [index]`. __(Substitute index with the number you noted down just now)__
. You should see the base template in all its glory.

.Ready to rumble.
image::tutorial/step 2.png[width:2000]

[start=8]
. Now we can start layering the other images on top of the base image. Let's start by adding the coveralls logo.
We do that by using the `layer add` command. The logo is at index 3 for us so we enter `layer add 3`.

.Not exactly where we want it but it's a start.
image::tutorial/step 3.png[width:2000]

[start=9]
. The logo is a bit too big for our liking so let's resize it a bit. Start by selecting the layer that the logo is on with a quick `layer select 2`.
. Follow up with `apply resize 70%` and put Coveralls down a peg or two.

.Why don't you pick on someone your own **SIZE** huh? Get it? Size?
image::tutorial/step 4.png[width:2000]

[start=11]
. The logo isn't where we want it so let's move it right to the balloon.
Hit it with a `layer position 295x50`.

.And that's for rejecting my pull request!
image::tutorial/step 5.png[width:2000]

[start=12]
. Repeat steps 8 - 11 to place `regret.png` somewhere on the pink monster. Remember to select the new layer before you start to resize and reposition! __(Psst. resize for 60% and move it to (5, 450) if you don't feel like experimenting.)__

.Do androids dream of 100% code coverage?
image::tutorial/step 6.png[width:2000]

[start=13]
. Let's save our work before we **DEEP FRY** the living daylights out of it! You can do that by typing `save arrangement.png` or if you're feeling adventurous just `save` will overwrite your current file irreversibly.
. Open our file again, refer to step 5 and 6 if you need help.
. Now we can begin to use some of the more advanced features in Piconso! We add some noise to the image with `apply raw +noise gaussian`.
. Feel free to repeat the step 15 a few times to get the desired amount of noise! We did it five times to be sure. If you ever go overboard, use the `undo` command to ... undo the previous command. But face it, you're going to `redo` it anyway.

.Noisy indeed.
image::tutorial/step 7.png[width:2000]

[start=17]
. Now we bump the contrast up, **way __way__** up with `apply raw -contrast-stretch 15%`.
. Brightness and saturation gets the same boost with `apply raw -modulate 120,120`.
. Apply the finishing touches with an unsharp mask! `apply raw -unsharp 0x05`. Now the meme is starting to take shape!

.New and improved image, now with 500% more noise, 120% more brightness, 120% more saturation!
image::tutorial/step 8.png[width:2000]

[start=20]
. We are almost done! Repeat steps 8 - 11 again to slap some of the emojis on.
You can use the `apply rotate [degree]` command to spice the meme up a bit. If you're short on time, we've provided the exact resize and new positions:

 For the crying emoji:
    layer position 125x330
    apply resize 20%
    apply rotate 75

 For the 2 OK emojis:
    apply resize 10%
    layer position 270x390
    apply rotate 80

.You're finna gonna yeet this image.
image::tutorial/step 9.png[width:2000]

[start=21]
. Save the image again (`save lit_meme.png`) and we're ready to upload our image!
. Login with the aptly named `login` command. Don't worry, Piconso will never store your password in any shape or form!
. Upload the file with `g ul <lit_meme.png>`. You should see a confirmation message when the upload is complete.
. `logout` when you're done! Congrats, you have just went from to a Piconso-certified meme hero!

Before we let you go, wonder how we made the very first image you saw? Try this before you go!

[start=25]
. Add the base image back in, the base image will take up all the canvas space but don't worry.
. Select the layer which the original image is on and move it out of the way

 layer select 5
 layer position -450x0

[start=28]
. Use `canvas auto-resize on` to expand the canvas to show both of them.
. Remove the background color of the canvas with `canvas bgcolor none` or change it to something you like!




// end::getting_started[]

[[Features]]
== Features

=== Command Format
* Items in square brackets are compulsory parameters to be added e.g `convert [TRANSFORMATION]` +
* Items in round brackets are optional parameters and can be omitted, e.g `canvas size (NEW_SIZE)` +
* For items surrounded by `< >`, they are compulsory parameters to be added that need to be typed with `< >` +
** e.g `g ls <ALBUM_NAME>` can be used as `g ls <Vacation>` +
* Flags such as `/a` are compulsory flags that need to be included when using that command
** e.g `g ul ls /a`

=== Viewing help : `help`

Format: `help`: viewing list of all commands

=== Listing files in directory : `ls`

Format: `ls`: lists files in the current directory

// tag::dir[]
=== Changing directories : `cd`

Format: `cd [DIRECTORY_NAME]`: changes directory

[NOTE]
====
For changing of drives in Windows, add '//' after the drive name. In addition, pressing `Tab` key will autocomplete the directory name.
====

Example:

* `cd C://Users` - Changes the directory to Users in C:/ drive.

=== Opening images for editing: `open`

Format: `open [INDEX 1-10]`: opens an image for image-editing

Format: `open -all`: adds all images in current directory from working set [Coming in v2.0]

Examples:

* `open 1` +
* `open -all` [Coming in v2.0]

=== Retrieving the next batch of images: `next`

Format: `next`: Retrieves the next 10 images for editing

=== Retrieving the previous batch of images: `prev`

Format: `prev`: Retrieves the previous 10 images for editing

// end::dir[]
// tag::convert[]

=== Applying a transformation to an image : `apply`
You can use the apply command with the given format

Format1: `apply [operation] [arg1] [arg2] ...`: apply the specified transformation to the selected image

[NOTE]
you can also apply your own customized transformation, with the format `apply @Operation`, `@` is necessary

Available transformations

* `blur`: you can performs gaussian blur on the currently opened image, with the argument specified with radius and sigama

** Format: `apply blur [RadiusxSigama]`
** Limit: the value for radius should in between [0 - 99], for sigama should in between [0 - 99]
** Example: `apply blur 0x8`

* `colorspace`: you can change the color space of the current image

** Format: `apply colorspace [color space]`
** Limit: only the provided color spaces is available, can be either up/low case
** Example: `apply colorspace GRAY`

[NOTE]
for some of the color spaces, the image effect may not change after changing the color space

* `contrast`: you can contrast of the image with the default setting.

** Format: `apply contrast`
** Example: `apply contrast`

[NOTE]
the default contrast just hences the effect of the image, the result may not be so obvious,
use sigmodial-contrast if want to make the effect more impressive.

* `motion-blur`: you can perform the motion blur to the image

** Format: `apply motion-blur [RadiusxSigama+Angle]`
** Limit: the value of radius should be between [0-29] the value of sigma should be between [0-19] the value of angle should between [0-99]
** Example: `apply motion-blur 0x8+45`

* `noise`: you can increase the noise of the image

** Format: `apply noise [Radius]`
** Limit: the value of radius should be between [0-29]
** Example: `apply noise 12`

* `resize`: you can resize the image to the specified percentage of the original one

** Format: `convert resize [percentage]`
** Limit: the value for the percentage should in between [1% - 300%]
** Example: `convert resize 50%`

[NOTE]
as all the images will be resize to the canvas when displaying, the resize command may reduce a "same" image
on the canvas

* `rotate`: you can rotate an image. DIRECTION [left, right]

** Format: `convert rotate [value]`
** Limit: the value should between -999 to 999
** Example: `convert rotate 90`

* `sharpen`: you can sharpen the currently opened image, with the argument specified with radius and sigama

** Format: `apply sharpen [RadiusxSigama]`
** Limit: the value for radius should in between [0 - 29], for sigama should in between [0 - 29]
** Example: `apply sharpen 0x8`


* `sigmoidal-contrast`: you can contrast the image with certain degree and percentage

** Format: `convert sigmoidal-contrast [DegreexPercentage]`
** Limit: the value for degree should between 1 - 99, for percentage should between 1% to 99%
** Example: `convert sigmoidal-contrast 10x10%`

Format2: `apply raw [arg1] [arg2]`: pass the arguments entered directly to ImageMagick

[WARNING]
**Here be dragons!** The raw command allows for powerful transformations but with power comes great responsibility to get your commands right. While we can tell you if an error occurs, we can't help you more than that so be careful!

// end::convert[]
// tag::create[]

=== Customizing transformation for imageProcessing : `create`

Format: `create [Name_Of_operation] [op1|arg1|arg2|...] [op2|arg1|arg2|...]`: create a customized transformation basing on the default transformations specified

Example:

* `create blurAndRotate blur|0x8 rotate|90`
To use the newly created command, add an `@` before the command used:
`apply @blurAndRotate`

[NOTE]
for the command created, you should add a @ before the command when running the customised command, ie convert @blurR

// end::create[]
// tag::save[]

=== Saving images : `save`

Format: `save [IMAGE_NAME]`: saves the transformed image, supporting jpg, jpeg, png, tiff, gif

Example:

* `save modified.png`

[NOTE]
====
The image will be saved in the same directory as the original image. With no image name specified, it will save to the currently opened image.

the format can also be all up cases.
====
// end::save[]
// tag::undoredo[]

=== Undoing a transformation : `undo`

Format: `undo`: Step back to the previous image state (in current layer)

[NOTE]
====
Commands that can be undone: those commands that modify the image's transformation (anything done with `convert`).
====

Example:

* `convert blur 0x8` +
`convert contrast` +
`undo` (undoes the `convert contrast` command, image will be at `blur 0x8` state) +

=== Undoing all transformations : `undo-all`

Format: `undo-all`: Undoes all transformations (reverts image to original state)

Example:

* `convert blur 0x8` +
`convert contrast` +
`convert rotate 90` +
`undo-all` (undoes all 3 `convert` commands, image will be at original state) +

=== Redoing a transformation : `redo`

Format: `redo`: Step forward to the previously undone transformation

Example:

* `convert blur 0x8` +
`convert contrast` +
`undo` (undoes the `convert contrast` command, image will be at `blur 0x8` state) +
`redo` (reapplies the `convert contrast` command) +

=== Redoing all transformations : `redo-all`

Format: `redo-all`: Redoes all undone transformations

Example:

* `convert blur 0x8` +
`convert contrast` +
`convert rotate 90` +
`undo-all` (undoes all 3 `convert` commands, image will be at original state) +
`redo-all` (reapplies all 3 `convert` commands) +
// end::undoredo[]

// tag::canvas[]
=== Canvas operations : `canvas`

==== Changing the size of the canvas: `canvas size`
You can change the size of the canvas to with this command. Remember that the effects of `canvas auto-resize` takes precedence!
If `canvas auto-resize` is `off`, cropping might potentially occur.


Format: `canvas size (NEW_SIZE)`

[NOTE]
====
If the optional parameter NEW_SIZE is not provided, the current size will be displayed in the output instead.
====

Examples:

* `canvas size 800x600` - Sets the canvas to have a height of 800 pixels and a width of 600px.
* `canvas size` - Prints the current size.

==== Changing the background color of the canvas: `canvas bgcolor`
You can change the background color of the canvas with this command. This is only visible if the canvas is larger than all the images placed on it.
See the examples for the formats that your colors can take.

Format: `canvas bgcolor (NEW_COLOR)`

[NOTE]
====
If the optional parameter NEW_COLOUR is not provided, the current colour will be displayed in the output instead.
====

Examples:

* `canvas bgcolor none` - Sets the canvas to have a transparent background.
* `canvas bgcolor #0f0` - Sets the canvas to the hex colour #00ff00 image:00ff00.png[width:15].
* `canvas bgcolor #00ff00` - Sets the canvas to the hex colour #00ff00 image:00ff00.png[width:15].
* `canvas bgcolor rgba(0,255,0,0.7)` - Sets the canvas to the hex colour #00ff00 but with 70% opacity image:00ff00-70.png[width:15].
* `canvas bgcolor` - Prints the background colour.

==== Allowing the canvas to auto-resize: `canvas auto-resize [ON|OFF]`
This command allows you to turns the auto-resize for the canvas on or off.
When auto-resize is on, it can potentially override the size manually specified with the `canvas size` command.
When `on`, the canvas expands as required to ensure that no clipping occurs.

Format : canvas auto-resize [ON|OFF]

[NOTE]
====
New canvases default to having auto-resize off.
====


Examples:

* `canvas auto-resize on`: Allows the canvas to expand and prevent cropping.
* `canvas auto-resize off`: The height and width of the output canvas will remain as is.

// end::canvas[]

// tag::layer[]
=== Layer operations : `layer`

==== Adding a new layer: `layer add [INDEX] (LAYER_NAME)`
You can select the image at the provided index and add it to the current canvas with this command.

[NOTE]
====
If the optional parameter LAYER_NAME is not provided, one will be automatically generated.
====

Examples:

* `layer add 4` - Adds the image at index 4 to the canvas.

==== Removing a layer: `layer remove [INDEX]`

This command allows you to permanently removes a layer from canvas.

[WARNING]
====
This operation is not reversible! Be careful when removing layers!
====

==== Selecting a layer to work on: `layer select [INDEX]`
This command allows you to a layer to that all `apply` and `layer position` operations will work on.
The index of a layer is displayed before its name in the Layers panel.

Examples:

* `layer select 2` : Selects the layer at index 2.

==== Swapping the order of two layers: `layer swap [TO_INDEX] [FROM_INDEX]`
You can change the order of any two distinct layers with this command. The lower the index, the further behind it will be.

Examples:

* `layer swap 1 2` : Changes the order of layer 1 and layer 2.

==== Positioning a layer: `layer position [POSITION]`
This command allows you to set the x and y co-ordinates of the current layer.
(0,0) is defined to be the top left of the screen.

Examples:

* `layer position 50x100` : Sets the layer's top left corner to be at position (50, 100).

// end::layer[]

// tag::google[]
=== Logging in to Google Photos: `login`

Format: `login`: allows you to log in to Google Photos

[NOTE]
====
*Requires a stable internet connection* +
Once the `login` command is launched, you *MUST* proceed with logging in from the redirected page, otherwise the application will freeze. You may use `logout` afterwards if you have changed your mind. +

A fix is upcoming in v2.0.
====

=== Google Photos related commands: `g`

[NOTE]
====
All commands will require a stable internet connection.
====

==== Traversing Google Photos: `g ls`

Format: `g ls`: lists all photos in your Google Photos, takes a longer amount of time depending on the number of images stored. +
Format: `g ls /a`: lists all albums in your Google Photos. +
Format: `g ls <ALBUM_NAME>`: lists all photos in specified album from Google Photos.

Examples:

* `g ls <Vacation>`

==== Downloading photos from Google Photos: `g dl`

[NOTE]
====
All photos will be downloaded to the currently opened local directory. +
Any files with duplicate naming existing in the targeted directory *WILL* be replaced
====

Format: `g dl /i<IMAGE_NAME>`: downloads specified image from Google Photos +
Format: `g dl /a<ALBUM_NAME>`: downloads all images from specified album in Google Photos, takes a longer amount of time depending on the number of images stored in the album. +
Format: `g dl /a<ALBUM_NAME> /i<IMAGE_NAME>`: downloads a specific photo from a specific album in Google Photos.

Examples:

* `g dl /i<Beach.png>` -> Downloads Beach.png +
* `g dl /a<Vacation>` -> Downloads all photos from Vacation album +
* `g dl /a<Vacation> /i<Beach.png>` -> Downloads Beach.png from Vacation album +

==== Uploading photos to Google Photos: `g ul`

[NOTE]
====
All uploaded photos will be automatically categorised into album 'Piconso Uploads'
====

Format: `g ul <IMAGE_NAME>`: uploads specified image in currently open local directory to Google Photos +
Format: `g ul all`: uploads all images in current directory to Google Photos, takes a longer amount of time depending on number of images to upload.

Examples:

* `g ul <Cat.png>` -> Uploads Cat.png +

=== Logging out of Google Photos: `logout`

Format: `logout`: logs you out of Google Photos

// tag::google[]

=== Exiting the application: `exit`

Format: `exit`: closes the application

== FAQ

*Q*: How do I transfer my data to another Computer? +
*A*: Install the app in the other computer and overwrite the empty data file it creates with the file that contains the data of your previous folder.

== Command Summary

* *Help* : `help` +
* *Ls* : `ls` +
* *Cd* : `cd [DIRECTORY_NAME]` +
* *open* : `open [INDEX 1-10]` +
e.g. `open 1` +
* *Next* : `next` +
* *Previous* : `prev` +
* *Apply* `apply [TRANSFORMATION]` +
e.g. `apply rotate 180` +
* *Save* : `save [IMAGE_NAME]/[SET_NAME]` +
e.g. `save exampleImage.jpg` +
* *Undo* : `undo` +
* *Undo All* : `undo-all` +
* *Redo* : `redo` +
* *Redo All* : `redo-all` +
* *Canvas auto-resize* : `canvas auto-resize [on/off]`
* *Background color* : `canvas bgcolor [color]`
* *Canvas size* : `canvas size (heightxwidth)`
* *Add layer* : `layer add [INDEX]`
* *Delete layer* : `layer delete [INDEX]`
* *Reposition layer* : `layer position [newXxnewY]`
* *Select layer* : `layer select [INDEX]`
* *Swap the order of two layers* : `layer swap [INDEX 1] [INDEX 2]`
* *Login* : `login` +
* *Google List* : `g ls OR g ls /a OR g ls <ALBUM_NAME>` +
* *Download* : `g dl /i<IMAGE_NAME> OR g dl /a<ALBUM_NAME> OR g dl /a<ALBUM_NAME> /i<IMAGE_NAME>` +
* *Upload* : `g ul <IMAGE_NAME> OR g ul all` +
* *Logout* : `logout` +
* *Exit* : `exit`
